
ADD_EXECUTABLE(findnorm findnorm_cmake.c)

SET(ELMERGRID_BIN "${CMAKE_BINARY_DIR}/elmergrid/src/ElmerGrid")
SET(ELMERSOLVER_BIN "${CMAKE_BINARY_DIR}/fem/src/ElmerSolver")
SET(FINDNORM_BIN "${CMAKE_CURRENT_BINARY_DIR}/findnorm")

CONFIGURE_FILE(${CMAKE_CURRENT_SOURCE_DIR}/runtests.in.cmake
  ${CMAKE_CURRENT_BINARY_DIR}/runtests)

SET(ENV{ELMER_LIB} "{CMAKE_BINARY_DIR}/fem/src")
SET(ENV{ELMER_HOME} "{CMAKE_BINARY_DIR}/fem/src")

ADD_SUBDIRECTORY(1dtests)
ADD_SUBDIRECTORY(1sttime)
ADD_SUBDIRECTORY(2ndtime)
ADD_SUBDIRECTORY(adaptivity2)

INSTALL(PROGRAMS ${CMAKE_CURRENT_BINARY_DIR}/runtests DESTINATION "tests")
